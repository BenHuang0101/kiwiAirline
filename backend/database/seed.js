const { query } = require('../config/database');
const bcrypt = require('bcryptjs');

// æ’å…¥åŸºç¤è³‡æ–™
const seedData = async () => {
  try {
    console.log('ğŸŒ± é–‹å§‹æ’å…¥ç¨®å­è³‡æ–™...');

    // æ’å…¥æ©Ÿå ´è³‡æ–™
    const airports = [
      ['TPE', 'å°ç£æ¡ƒåœ’åœ‹éš›æ©Ÿå ´', 'å°åŒ—', 'å°ç£', 'Asia/Taipei', 25.0797, 121.2342],
      ['TSA', 'å°åŒ—æ¾å±±æ©Ÿå ´', 'å°åŒ—', 'å°ç£', 'Asia/Taipei', 25.0694, 121.5519],
      ['KHH', 'é«˜é›„åœ‹éš›æ©Ÿå ´', 'é«˜é›„', 'å°ç£', 'Asia/Taipei', 22.5771, 120.3498],
      ['NRT', 'æˆç”°åœ‹éš›æ©Ÿå ´', 'æ±äº¬', 'æ—¥æœ¬', 'Asia/Tokyo', 35.7647, 140.3864],
      ['HND', 'æ±äº¬ç¾½ç”°æ©Ÿå ´', 'æ±äº¬', 'æ—¥æœ¬', 'Asia/Tokyo', 35.5494, 139.7798],
      ['ICN', 'ä»å·åœ‹éš›æ©Ÿå ´', 'é¦–çˆ¾', 'éŸ“åœ‹', 'Asia/Seoul', 37.4602, 126.4407],
      ['PVG', 'ä¸Šæµ·æµ¦æ±åœ‹éš›æ©Ÿå ´', 'ä¸Šæµ·', 'ä¸­åœ‹', 'Asia/Shanghai', 31.1443, 121.8083],
      ['HKG', 'é¦™æ¸¯åœ‹éš›æ©Ÿå ´', 'é¦™æ¸¯', 'é¦™æ¸¯', 'Asia/Hong_Kong', 22.3089, 113.9148],
      ['SIN', 'æ–°åŠ å¡æ¨Ÿå®œæ©Ÿå ´', 'æ–°åŠ å¡', 'æ–°åŠ å¡', 'Asia/Singapore', 1.3644, 103.9915],
      ['BKK', 'è˜‡å‡¡ç´å¸ƒæ©Ÿå ´', 'æ›¼è°·', 'æ³°åœ‹', 'Asia/Bangkok', 13.6900, 100.7501],
      ['KUL', 'å‰éš†å¡åœ‹éš›æ©Ÿå ´', 'å‰éš†å¡', 'é¦¬ä¾†è¥¿äº', 'Asia/Kuala_Lumpur', 2.7456, 101.7072],
      ['MNL', 'å°¼è«¾ä¼ŠÂ·é˜¿åŸºè«¾åœ‹éš›æ©Ÿå ´', 'é¦¬å°¼æ‹‰', 'è²å¾‹è³“', 'Asia/Manila', 14.5086, 121.0194],
      ['LAX', 'æ´›æ‰ç£¯åœ‹éš›æ©Ÿå ´', 'æ´›æ‰ç£¯', 'ç¾åœ‹', 'America/Los_Angeles', 33.9425, -118.4081],
      ['SFO', 'èˆŠé‡‘å±±åœ‹éš›æ©Ÿå ´', 'èˆŠé‡‘å±±', 'ç¾åœ‹', 'America/Los_Angeles', 37.6213, -122.3790],
      ['LHR', 'å€«æ•¦å¸Œæ–¯æ´›æ©Ÿå ´', 'å€«æ•¦', 'è‹±åœ‹', 'Europe/London', 51.4700, -0.4543],
      ['CDG', 'å·´é»æˆ´é«˜æ¨‚æ©Ÿå ´', 'å·´é»', 'æ³•åœ‹', 'Europe/Paris', 49.0097, 2.5479],
      ['FRA', 'æ³•è˜­å…‹ç¦æ©Ÿå ´', 'æ³•è˜­å…‹ç¦', 'å¾·åœ‹', 'Europe/Berlin', 50.0379, 8.5622],
      ['DXB', 'æœæ‹œåœ‹éš›æ©Ÿå ´', 'æœæ‹œ', 'é˜¿è¯é…‹', 'Asia/Dubai', 25.2532, 55.3657],
      ['SYD', 'é›ªæ¢¨æ©Ÿå ´', 'é›ªæ¢¨', 'æ¾³æ´²', 'Australia/Sydney', -33.9399, 151.1753],
      ['MEL', 'å¢¨çˆ¾æœ¬æ©Ÿå ´', 'å¢¨çˆ¾æœ¬', 'æ¾³æ´²', 'Australia/Melbourne', -37.6690, 144.8410]
    ];

    for (const airport of airports) {
      await query(
        `INSERT IGNORE INTO airports (airport_code, airport_name, city, country, timezone, latitude, longitude) 
         VALUES (?, ?, ?, ?, ?, ?, ?)`,
        airport
      );
    }
    console.log('âœ… æ©Ÿå ´è³‡æ–™æ’å…¥å®Œæˆ');

    // æ’å…¥æ¸¬è©¦ç”¨æˆ¶
    const hashedPassword = await bcrypt.hash('123456', 12);
    const users = [
      ['admin@kiwiairline.com', hashedPassword, 'ç³»çµ±', 'ç®¡ç†å“¡', '0912345678', '1990-01-01', 'M', 'å°ç£', 'A123456789', true, true],
      ['test@example.com', hashedPassword, 'æ¸¬è©¦', 'ç”¨æˆ¶', '0987654321', '1985-05-15', 'F', 'å°ç£', 'B987654321', true, true],
      ['john.doe@email.com', hashedPassword, 'John', 'Doe', '+1234567890', '1988-03-20', 'M', 'ç¾åœ‹', 'US1234567', true, true]
    ];

    for (const user of users) {
      await query(
        `INSERT IGNORE INTO users (email, password_hash, first_name, last_name, phone_number, date_of_birth, gender, nationality, passport_number, is_active, email_verified) 
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
        user
      );
    }
    console.log('âœ… æ¸¬è©¦ç”¨æˆ¶æ’å…¥å®Œæˆ');

    // æ’å…¥èˆªç­è³‡æ–™
    const flights = [
      // å°åŒ— â†’ æ±äº¬
      ['KW001', 1, 4, '2024-08-01 08:00:00', '2024-08-01 12:00:00', 'A350-900', 300, 280, 12000.00, 'TWD', 'scheduled'],
      ['KW002', 4, 1, '2024-08-01 14:00:00', '2024-08-01 17:00:00', 'A350-900', 300, 290, 11500.00, 'TWD', 'scheduled'],
      ['KW003', 1, 5, '2024-08-02 09:30:00', '2024-08-02 13:30:00', 'B777-300ER', 350, 320, 13500.00, 'TWD', 'scheduled'],
      
      // å°åŒ— â†’ é¦–çˆ¾
      ['KW101', 1, 6, '2024-08-01 10:00:00', '2024-08-01 13:30:00', 'A330-300', 280, 250, 10000.00, 'TWD', 'scheduled'],
      ['KW102', 6, 1, '2024-08-01 15:30:00', '2024-08-01 19:00:00', 'A330-300', 280, 260, 9800.00, 'TWD', 'scheduled'],
      
      // å°åŒ— â†’ ä¸Šæµ·
      ['KW201', 1, 7, '2024-08-01 11:00:00', '2024-08-01 13:00:00', 'A321neo', 200, 180, 8000.00, 'TWD', 'scheduled'],
      ['KW202', 7, 1, '2024-08-01 16:00:00', '2024-08-01 18:00:00', 'A321neo', 200, 170, 7800.00, 'TWD', 'scheduled'],
      
      // å°åŒ— â†’ é¦™æ¸¯
      ['KW301', 1, 8, '2024-08-01 12:30:00', '2024-08-01 14:30:00', 'A320neo', 180, 160, 6500.00, 'TWD', 'scheduled'],
      ['KW302', 8, 1, '2024-08-01 17:30:00', '2024-08-01 19:30:00', 'A320neo', 180, 150, 6200.00, 'TWD', 'scheduled'],
      
      // å°åŒ— â†’ æ–°åŠ å¡
      ['KW401', 1, 9, '2024-08-01 13:00:00', '2024-08-01 17:30:00', 'B787-9', 290, 270, 15000.00, 'TWD', 'scheduled'],
      ['KW402', 9, 1, '2024-08-01 20:00:00', '2024-08-02 00:30:00', 'B787-9', 290, 280, 14800.00, 'TWD', 'scheduled'],
      
      // å°åŒ— â†’ æ›¼è°·
      ['KW501', 1, 10, '2024-08-01 14:30:00', '2024-08-01 17:30:00', 'A330-200', 260, 240, 12500.00, 'TWD', 'scheduled'],
      ['KW502', 10, 1, '2024-08-01 21:30:00', '2024-08-02 02:30:00', 'A330-200', 260, 230, 12200.00, 'TWD', 'scheduled'],
      
      // é•·ç¨‹èˆªç·š
      ['KW801', 1, 13, '2024-08-01 23:30:00', '2024-08-01 18:30:00', 'B777-300ER', 350, 320, 45000.00, 'TWD', 'scheduled'], // å°åŒ—â†’æ´›æ‰ç£¯
      ['KW901', 1, 15, '2024-08-01 01:30:00', '2024-08-01 07:30:00', 'A350-1000', 350, 330, 35000.00, 'TWD', 'scheduled'], // å°åŒ—â†’å€«æ•¦
      ['KW1001', 1, 19, '2024-08-01 22:00:00', '2024-08-02 09:00:00', 'B787-9', 290, 270, 25000.00, 'TWD', 'scheduled'] // å°åŒ—â†’é›ªæ¢¨
    ];

    for (const flight of flights) {
      await query(
        `INSERT IGNORE INTO flights (flight_number, departure_airport_id, arrival_airport_id, departure_datetime, arrival_datetime, aircraft_type, total_seats, available_seats, base_price, currency, status) 
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
        flight
      );
    }
    console.log('âœ… èˆªç­è³‡æ–™æ’å…¥å®Œæˆ');

    // æ’å…¥å¸¸è¦‹å•é¡Œ
    const faqs = [
      ['booking', 'å¦‚ä½•æŸ¥è©¢æˆ‘çš„è¨‚ç¥¨è¨˜éŒ„ï¼Ÿ', 'æ‚¨å¯ä»¥ç™»å…¥æœƒå“¡å¸³è™Ÿå¾Œï¼Œåœ¨ã€Œæˆ‘çš„è¨‚ç¥¨è¨˜éŒ„ã€é é¢æŸ¥çœ‹æ‰€æœ‰çš„è¨‚ç¥¨è³‡è¨Šã€‚å¦‚æœæ‚¨æ²’æœ‰æœƒå“¡å¸³è™Ÿï¼Œå¯ä»¥ä½¿ç”¨è¨‚ç¥¨ç·¨è™Ÿå’Œé›»å­ä¿¡ç®±é€²è¡ŒæŸ¥è©¢ã€‚', 1],
      ['booking', 'å¦‚ä½•å–æ¶ˆæˆ–æ›´æ”¹è¨‚ç¥¨ï¼Ÿ', 'æ‚¨å¯ä»¥åœ¨è¨‚ç¥¨è¨˜éŒ„ä¸­é»æ“Šã€Œå–æ¶ˆè¨‚ç¥¨ã€æˆ–ã€Œæ›´æ”¹è¨‚ç¥¨ã€æŒ‰éˆ•ã€‚è«‹æ³¨æ„ï¼Œå–æ¶ˆæˆ–æ›´æ”¹å¯èƒ½æœƒç”¢ç”Ÿæ‰‹çºŒè²»ï¼Œè©³ç´°è¦å®šè«‹åƒè€ƒè³¼ç¥¨æ¢æ¬¾ã€‚', 2],
      ['payment', 'å¦‚ä½•ç”³è«‹é€€æ¬¾ï¼Ÿ', 'é€€æ¬¾ç”³è«‹éœ€è¦æ ¹æ“šæ‚¨è³¼è²·çš„ç¥¨åƒ¹é¡å‹è€Œå®šã€‚å¯é€€ç¥¨çš„è¨‚ç¥¨å¯ä»¥åœ¨ç·šä¸Šç”³è«‹é€€æ¬¾ï¼Œä¸å¯é€€ç¥¨çš„è¨‚ç¥¨å‰‡éœ€è¦ç¬¦åˆç‰¹æ®Šæ¢ä»¶æ‰èƒ½ç”³è«‹ã€‚', 3],
      ['other', 'å¿˜è¨˜å¯†ç¢¼æ€éº¼è¾¦ï¼Ÿ', 'è«‹åœ¨ç™»å…¥é é¢é»æ“Šã€Œå¿˜è¨˜å¯†ç¢¼ã€ï¼Œè¼¸å…¥æ‚¨çš„é›»å­ä¿¡ç®±åœ°å€ï¼Œç³»çµ±æœƒç™¼é€é‡è¨­å¯†ç¢¼çš„é€£çµåˆ°æ‚¨çš„ä¿¡ç®±ã€‚', 4],
      ['baggage', 'å¯ä»¥æ”œå¸¶å¤šå°‘è¡Œæï¼Ÿ', 'è¡Œæé™åˆ¶ä¾æ“šæ‚¨çš„ç¥¨åƒ¹é¡å‹è€Œå®šã€‚ä¸€èˆ¬ç¶“æ¿Ÿè‰™å¯æ”œå¸¶20å…¬æ–¤æ‰˜é‹è¡Œæå’Œ7å…¬æ–¤æ‰‹æè¡Œæã€‚è©³ç´°è¦å®šè«‹åƒè€ƒè¡Œææ”¿ç­–ã€‚', 5],
      ['check_in', 'å¦‚ä½•ç·šä¸Šå ±åˆ°ï¼Ÿ', 'æ‚¨å¯ä»¥åœ¨èˆªç­èµ·é£›å‰24å°æ™‚é–‹å§‹ç·šä¸Šå ±åˆ°ã€‚è«‹æº–å‚™å¥½æ‚¨çš„è¨‚ç¥¨ç·¨è™Ÿå’Œè­·ç…§è³‡è¨Šï¼Œåœ¨æˆ‘å€‘çš„å®˜ç¶²æˆ–æ‰‹æ©ŸAPPå®Œæˆå ±åˆ°æ‰‹çºŒã€‚', 6]
    ];

    for (const faq of faqs) {
      await query(
        `INSERT IGNORE INTO faqs (category, question, answer, display_order) VALUES (?, ?, ?, ?)`,
        faq
      );
    }
    console.log('âœ… å¸¸è¦‹å•é¡Œæ’å…¥å®Œæˆ');

    console.log('ğŸ‰ æ‰€æœ‰ç¨®å­è³‡æ–™æ’å…¥å®Œæˆï¼');
  } catch (error) {
    console.error('âŒ æ’å…¥ç¨®å­è³‡æ–™å¤±æ•—:', error);
    throw error;
  }
};

module.exports = { seedData };
